<!DOCTYPE HTML>
<HTML>
<HEAD>
<link href="animations.css" type="text/css" rel="stylesheet">
<link href="intro.css" type="text/css" rel="stylesheet">
<!--POWERHUB INTRO STARTUP SCREEN CODE (C) 2019 -->
<!--MAIN SCREEN (C) 2019 -->
<!--javascript-->
<script src="jquery-3.4.1.min.js"></script>
<script src="js-cookie.js"></script>
<script src="plotly.js"></script>
<script src="login.js"></script>
<script>fgt = Cookies.get('fgt'); /* login handler */</script>
<script src="main_readout.js"></script>
<script>
	fpt = 0 //carbon footprint
	if (isLogin(fgt) != 1){
		window.location.href = "/resources/pages/login.html";
	}//end
	readData(); //initial data reading
	window.onload = function () {
		if (Cookies.get('sesh') != "10100000"){ //start logo animation cookie
			document.getElementById("intro_logo").style.animationPlayState = "running" ;
			Cookies.set("sesh", "10100000");
		} else {
			document.getElementById("intro_logo").style.opacity = "0.5";
		}
	}//end
	function beep(){
		$('#notif').get(0).play();
	}
	//readout code in main_readout.js
	
	var dyg = new Worker('graph.js');
	dyg.postMessage(fgt);
	dyg.onmessage = function(e){ 				
		e = JSON.parse(e.data);
		x = [], y = [];
		for (var i = 0; i < e.length; i++){
			x.push(i); y.push(parseFloat(e[i].current));
		};
		console.log(e);
		Plotly.react('graph', [{x:x, y:y}], {margin: {l:0,r:0,b:0,t:0,pad:2}});
	}
	</script>
<style>
	body{
		background: rgb(20,21,38);				/* The rest of the styles are on the intro.css stylesheet*/
		color:#FFFFFF;
		width: 360px;
		margin: 0 auto;
		overflow-x:hidden;
	}
	table{
		background: rgb(38,39,59)
	}
	td, th{
		border: 1px solid #dddddd;
	}
	#graph{
		height:200px; width:80%; background:white; margin-left:10%;
	}
	/*override na lang pota*/
	#intro_logo{
		position:fixed;
		animation-play-state: paused;
		top:12px;
	}
	#data, #nodeshit, #notifs{
		width:275px;
		margin-left:15%;
	}
	.limit, .overv{
		display:none;
	}
</style>
</HEAD>
<BODY>
<script src="client.min.js"></script>
	<!--actual markup code here-->
	<div style="height:96px"></div><!--placeholder-->
	<img id="intro_logo" src="../logo1.png">
	Display: <select name="displayData"><option>Average</option><option>Instantaneous</option><option>Past Month</option></select>
	<table id="data">
		<tr><td>Voltage<br><span id="voltage">---</span> V</td>
		<td>Current<br><span id="current">---</span> A</td>
		<td>Wattage<br><span id="wattage">---</span> W</td></tr>
		<tr><td>Power Factor<br><span id="pf">---</span></td><td>Kilowatt-hours<br><span id="kwh">---</span></tr>
		<!--<td>Graph Here</td></tr>-->
	</table>
	<div id="graph"></div>
	<table id="nodeshit">
	<tr><td>Node Name<br><span id="nodename">---</span></td>
	<td>IP Address<br><span id="ipaddr">---</span></td></tr>
	<tr><td>Firmware Version<br><span id="firmware">---</span></td>
	<td>Uptime:<br>99999</td></tr>
	<tr><td>Carbon footprint: <br><span id="carbfpt">---</span> KG</td></tr>
	</table>
	<table id="notifs" style="background:#1a2839;">
	<tr class="limit"><td><center><img src="/resources/icons/limit.gif" style="height:36px"/></center></td><td>Limit Reached!</td></tr>
	<tr class="overv"><td><img src="/resources/icons/overv.gif" style="height:36px"/></td><td>Significant peak detected</td></tr>
	</table>
	<!--<audio autoplay="true" style="display:none;" src="/resources/beep.mp3"></audio>-->
	<audio id="notif" style="display:none;" src="/resources/beep.mp3"></audio>
	<div style="height:96px"></div><!--placeholder-->
	<iframe id="nav" src="nav.html?from=home"></iframe>
</BODY>
</HTML>

	
<!---dynamic shit here! -->
